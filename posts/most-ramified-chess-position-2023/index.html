<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">




    

<meta name="author" content="Luke Salamone">
<meta name="keywords" content=", chess, data" />
<meta name="google-site-verification" content="sPwRw-1pCCEcm2EbqDJiJzJEnze1K7FkQzY9xLreBJQ" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://lukesalamone.github.io/posts/most-ramified-chess-position-2023/" />

<meta property="og:title" content=""/>
<meta property="og:image" content=""/>
<meta property="og:description" content=""/>

<script>
    if(location.hostname !== 'localhost') {
        
            fetch('https://d1tkdcmshl91xi.cloudfront.net?p=' + window.location.href.match(/\/([^/]+)\/$/)[1]);
        
    }
</script>

<script data-goatcounter="https://qw6ut244wbxe3rf2bvu5.goatcounter.com/count" async src="../../js/count.js"></script>


    <title>
        
            The Most Ramified Chess Position of 2023 :: Luke Salamone&#39;s Blog 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="../../main.e929a2b129440353e8b5e39dd12696947040fd7c9a9639e600bca78a3fadd11b.css">




    <link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
    <link rel="shortcut icon" href="../../favicon.ico">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#ffffff">




  <meta itemprop="name" content="The Most Ramified Chess Position of 2023">
  <meta itemprop="description" content="I spent some time considering words to describe a chess position with many legal moves. ‚ÄúComplex‚Äù doesn‚Äôt quite capture the situation since we would usually describe a complex position as one with many tactical interations. Ramified seems to make the most sense, as it describes ‚Äúbranching out‚Äù.
The opening position in chess has 20 legal moves. From there, the number of legal moves in a position tends to increase as pieces move towards the center of the board, before decreasing as the number of pieces on the board drops in the endgame.">
  <meta itemprop="datePublished" content="2024-06-13T19:38:39-07:00">
  <meta itemprop="dateModified" content="2024-06-13T19:38:39-07:00">
  <meta itemprop="wordCount" content="460">
  <meta itemprop="image" content="https://lukesalamone.github.io/">
  <meta itemprop="keywords" content="Chess,Data">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://lukesalamone.github.io/">
  <meta name="twitter:title" content="The Most Ramified Chess Position of 2023">
  <meta name="twitter:description" content="I spent some time considering words to describe a chess position with many legal moves. ‚ÄúComplex‚Äù doesn‚Äôt quite capture the situation since we would usually describe a complex position as one with many tactical interations. Ramified seems to make the most sense, as it describes ‚Äúbranching out‚Äù.
The opening position in chess has 20 legal moves. From there, the number of legal moves in a position tends to increase as pieces move towards the center of the board, before decreasing as the number of pieces on the board drops in the endgame.">



    <meta property="og:url" content="https://lukesalamone.github.io/posts/most-ramified-chess-position-2023/">
  <meta property="og:site_name" content="Luke Salamone&#39;s Blog">
  <meta property="og:title" content="The Most Ramified Chess Position of 2023">
  <meta property="og:description" content="I spent some time considering words to describe a chess position with many legal moves. ‚ÄúComplex‚Äù doesn‚Äôt quite capture the situation since we would usually describe a complex position as one with many tactical interations. Ramified seems to make the most sense, as it describes ‚Äúbranching out‚Äù.
The opening position in chess has 20 legal moves. From there, the number of legal moves in a position tends to increase as pieces move towards the center of the board, before decreasing as the number of pieces on the board drops in the endgame.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-13T19:38:39-07:00">
    <meta property="article:modified_time" content="2024-06-13T19:38:39-07:00">
    <meta property="article:tag" content="Chess">
    <meta property="article:tag" content="Data">
    <meta property="og:image" content="https://lukesalamone.github.io/">






    <meta property="article:published_time" content="2024-06-13 19:38:39 -0700 PDT" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="../../" style="text-decoration: none;">
  <div class="logo">
    <div class="logo-holder-dark">
      <img src="../../img/logo.png" alt="Blog Home" />
    </div>
    <div class="logo-holder-light">
      <img src="../../img/logo2.png" alt="Blog Home" />
    </div>
  </div>
</a>


        <span class="header__right">
            
            <div id="header_search">
              <input type="text" placeholder="Search here" />
            </div>
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        3 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://lukesalamone.github.io/posts/most-ramified-chess-position-2023/">The Most Ramified Chess Position of 2023</a>
      </h1>

      

      <div class="post-content">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
<p><strong>I spent some time considering words to describe a chess position with many legal moves. &ldquo;Complex&rdquo; doesn&rsquo;t quite capture the situation since we would usually describe a complex position as one with many tactical interations. <a href="https://en.wikipedia.org/wiki/Ramification_%28botany%29">Ramified</a> seems to make the most sense, as it describes &ldquo;branching out&rdquo;.</strong></p>
<p>The opening position in chess has 20 legal moves. From there, the number of legal moves in a position tends to increase as pieces move towards the center of the board, before decreasing as the number of pieces on the board drops in the endgame.</p>
<p>People have composed <a href="https://lichess.org/analysis/fromPosition/R6R/3Q4/1Q4Q1/4Q3/2Q4Q/Q4Q2/pp1Q4/kBNN1KB1_w_-_-">artificial positions</a> with a huge number of legal moves. The most ramified artificial position I have found has 218 legal moves. But it&rsquo;s hard to imagine how such a position could come about in a real game, which is what I&rsquo;m interested in. So I churned through all of the positions in all of the Lichess games which took place in 2023 in search of the most ramified chess position. Here is what I found.</p>
<h2 id="most-games-max-out-around-16-moves-in">Most games max out around 16 moves in</h2>
<p>In the chart below you can see the maximum moves at any point in the game. The x-axis represents half moves. (In other words, if white makes a move and black makes a move, that&rsquo;s two half moves.) Each game starts out with exactly 20 possible moves for white, which quickly increases in the middle game before gradually decreasing again.</p>
<p><canvas id="movesByPly" width="800" height="600"></canvas></p>
<p>The colors represent the percentiles, since at every slice along the x-axis there is actually a distribution of positions and associated legal moves. Interestingly, we can see that for the 10th percentile the bottom really falls out after 40 moves or so, with positions so constrained that there are only a handful of legal moves. These likely represent positions where the king is in check.</p>
<h2 id="100-move-positions-are-rare">100+ move positions are rare</h2>
<figure><img src="../../img/pgn_processing.gif"
    alt="Each line represents the chess position in a chunk of 5000 games with the most legal moves."><figcaption>
      <p>Each line represents the chess position in a chunk of 5000 games with the most legal moves.</p>
    </figcaption>
</figure>

<p>To parse the games, I wrote a multithreaded rust script with python bindings to process chunks of 5000 games at a time. Within a chunk of games, it was pretty typical for the maximum number of legal moves in any position in any game in the chunk to be between 70 and 100.</p>
<!-- <canvas id="maxMovesHist" width="800" height="400"></canvas> -->
<p>Here is a typical position with 84 legal moves for white:</p>
<iframe src="https://lichess.org/embed/game/bDB6sSJc?theme=auto&bg=auto#92"
width=760 height=600 frameborder=0></iframe>
<h2 id="very-few-ever-exceed-120">Very few ever exceed 120</h2>
<p>When you get past 100, most of the positions have several queens. There are exceptions, however. <a href="https://lichess.org/paqlYvUW#177">This 112 move gem has zero</a>.</p>
<p>Here is a typical 120-move position with six queens:</p>
<iframe src="https://lichess.org/embed/game/aWnIfauG?theme=auto&bg=auto#155"
width=760 height=600 frameborder=0></iframe>
<h2 id="the-147-move-position-">The 147 move position ü§Ø</h2>
<p>Here it is, the 147 legal move masterpiece.</p>
<iframe src="https://lichess.org/embed/game/cJq0LRav?theme=auto&bg=auto#117"
width=760 height=600 frameborder=0></iframe>
<h2 id="runners-up">Runners up</h2>
<ul>
<li><a href="https://lichess.org/MvZ3mrd5#153">8 queens, 146 legal moves</a></li>
<li><a href="https://lichess.org/h0UOgkCk#155">9 queens, 144 legal moves</a></li>
<li><a href="https://lichess.org/NvNWFSg4#96">9 queens, 142 legal moves</a></li>
<li><a href="https://lichess.org/lcPavnZp#153">8 queens, 142 legal moves</a></li>
</ul>
<script>
  let percentiles = {
    "10": [20, 21, 22, 24, 26, 26, 26, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 27, 27, 27, 27, 27, 26, 26, 26, 26, 26, 25, 24, 24, 24, 23, 22, 22, 21, 20, 20, 19, 18, 16, 14, 12, 11, 9, 8, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3], 
    "20": [20, 24, 24, 25, 28, 28, 29, 30, 30, 30, 30, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29, 28, 28, 28, 27, 26, 26, 26, 25, 24, 24, 24, 23, 22, 22, 21, 20, 20, 19, 18, 18, 17, 16, 16, 16, 15, 14, 13, 12, 12, 12, 11, 10, 10, 10, 9, 8, 8, 8, 8, 8, 7, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5], 
    "30": [20, 24, 25, 25, 28, 30, 30, 32, 32, 32, 32, 32, 33, 33, 33, 33, 33, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 34, 33, 33, 33, 32, 32, 32, 32, 32, 31, 30, 30, 30, 30, 29, 28, 28, 28, 27, 26, 26, 25, 24, 24, 23, 22, 22, 22, 21, 20, 20, 20, 19, 18, 18, 18, 17, 16, 16, 16, 15, 14, 14, 14, 14, 13, 12, 12, 12, 12, 11, 11, 10, 10, 10, 10, 9, 9, 9, 8, 8, 8, 8, 8, 8, 8, 8, 7], 
    "40": [20, 24, 28, 28, 29, 31, 32, 32, 33, 34, 34, 34, 34, 34, 35, 35, 35, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 35, 35, 35, 34, 34, 34, 34, 33, 32, 32, 32, 32, 31, 30, 30, 29, 28, 28, 28, 27, 26, 26, 26, 25, 24, 24, 23, 22, 22, 22, 21, 20, 20, 20, 19, 18, 18, 18, 18, 17, 17, 16, 16, 16, 16, 15, 15, 14, 14, 14, 14, 14, 13, 13, 13, 12, 12, 12, 12, 12, 11, 11, 11], 
    "50": [20, 24, 28, 29, 30, 32, 33, 34, 35, 36, 36, 36, 36, 36, 36, 36, 37, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 37, 37, 37, 36, 36, 36, 36, 35, 34, 34, 34, 33, 32, 32, 32, 31, 30, 30, 30, 29, 28, 28, 28, 27, 26, 26, 26, 25, 24, 24, 24, 22, 22, 22, 22, 21, 20, 20, 20, 19, 19, 18, 18, 18, 18, 18, 17, 17, 17, 16, 16, 16, 16, 16, 16, 15, 15, 15, 15, 15, 14], 
    "60": [20, 24, 29, 30, 31, 33, 34, 35, 36, 36, 37, 38, 38, 38, 38, 38, 39, 39, 39, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 39, 38, 38, 38, 38, 38, 38, 37, 36, 36, 36, 35, 34, 34, 34, 33, 32, 32, 32, 31, 30, 30, 30, 29, 28, 28, 28, 27, 26, 26, 26, 25, 24, 24, 24, 23, 22, 22, 22, 22, 21, 21, 20, 20, 20, 20, 20, 19, 19, 19, 18, 18, 18, 18, 18, 18, 18, 18, 17], 
    "70": [20, 25, 30, 30, 32, 34, 35, 36, 38, 38, 39, 40, 40, 40, 40, 40, 41, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 43, 43, 43, 43, 43, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 41, 40, 40, 40, 40, 40, 39, 38, 38, 38, 38, 37, 36, 36, 36, 36, 35, 34, 34, 33, 32, 32, 31, 30, 30, 30, 29, 29, 28, 28, 28, 27, 26, 26, 26, 26, 25, 24, 24, 24, 24, 23, 23, 22, 22, 22, 22, 22, 21, 21, 21, 21, 21, 20, 20, 20], 
    "80": [20, 25, 30, 32, 34, 36, 37, 38, 39, 40, 41, 42, 42, 42, 42, 43, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 44, 44, 44, 44, 44, 44, 44, 44, 43, 42, 42, 42, 42, 42, 41, 40, 40, 40, 39, 38, 38, 38, 37, 36, 36, 36, 35, 34, 34, 34, 33, 33, 32, 32, 32, 31, 30, 30, 30, 30, 29, 28, 28, 28, 28, 27, 27, 26, 26, 26, 26, 26, 26, 25, 25, 25, 25, 25, 24, 24], 
    "90": [20, 25, 30, 34, 36, 37, 38, 40, 41, 42, 43, 44, 45, 46, 46, 46, 46, 46, 47, 48, 48, 48, 48, 48, 48, 48, 48, 48, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 47, 46, 46, 46, 46, 46, 46, 46, 45, 44, 44, 44, 43, 42, 42, 42, 42, 42, 41, 40, 40, 40, 39, 38, 38, 38, 37, 36, 36, 36, 36, 35, 34, 34, 34, 34, 33, 33, 32, 32, 32, 32, 32, 31, 31, 31, 31, 31, 31, 30, 30, 30]
    };

  let colors = ['#00ff0019', '#00ff1c4c', '#00ff3980', '#00ff55b3', '#00ff71e6', '#00ff8eb3', '#00ffaa80', '#00ffc64c', '#00ffe319'];

  let datasets = Object.keys(percentiles).map(x => parseInt(x)).sort((a, b) => a-b).map((key, idx) => {
    return {
      label: `${key}th percentile`,
      data:percentiles[key + ''],
      backgroundColor: colors[idx],
      borderColor: colors[idx].slice(0,7),
      borderWidth: 1,
      pointRadius: 0,
      fill:'+1'
    };
  })

  const config = {
    type: 'line',
    data: {
      labels:Array.from({length: 101}, (_, index) => index),
      datasets: datasets
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          title: {
            display: true,
            text: '# legal moves'
          }
        },
        x: {
          title: {
            display: true,
            text: 'half-moves into game'
          }
        }
      },
      plugins: {
        title: {
          display: true,
          text: 'number of moves by ply',
          font: {
            size: 16
          },
          padding: {
            top: 10,
            bottom: 30
          }
        },
        // legend: {
        //   display: false
        // }
      }
    }
  };

  const myChart = new Chart(document.getElementById('movesByPly'), config);
</script>
<script>
  let histData = ["0.16264871", "0.00656638", "0.00871243", "0.00130045", "0.00086964", "0.00038673", "0.00075342", "0.02417359", "0.03599588", "0.08046975", "0.12240082", "0.04151829", "0.06883581", "0.05604168", "0.06971947", "0.08875537", "0.09150055", "0.11839126", "0.19631219", "0.31351120", "0.44738365", "0.69643930", "1.02187499", "1.54113618", "2.12636978", "2.79879780", "3.68506507", "4.60544467", "5.53388347", "6.45800011", "7.69917063", "7.53643576", "7.84121249", "7.36049398", "6.88992060", "6.26871116", "5.44162148", "4.60481949", "3.80167096", "3.03858799", "2.38255688", "1.83647712", "1.38158531", "1.02173072", "0.74028999", "0.52558111", "0.37072709", "0.25889421", "0.17859478", "0.12151114", "0.08456747", "0.05826788", "0.03935822", "0.02706504", "0.01928837", "0.01363772", "0.01005095", "0.00762638", "0.00556449", "0.00434419", "0.00359678", "0.00307780", "0.00240053", "0.00204987", "0.00173327", "0.00146677", "0.00138661", "0.00123633", "0.00114416", "0.00100389", "0.00084359", "0.00075142", "0.00065123", "0.00055905", "0.00054904", "0.00049493", "0.00041478", "0.00035667", "0.00037070", "0.00029856", "0.00024847"].map(x => parseFloat(x));


const config2 = {
    type: 'line',
    data: {
      labels:Array.from({length: 81}, (_, index) => index+20),
      datasets: [{
          label: `max moves`,
          data:histData,
          backgroundColor: '#ff00ff22',
          borderColor: '#ff00ff',
          borderWidth: 1,
          pointRadius: 1,
          fill:'origin'
        }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          title: {
            display: true,
            text: '% of games'
          }
        },
        x: {
          title: {
            display: true,
            text: 'max moves in the game'
          }
        }
      },
      plugins: {
        tooltip: {
                enabled: true,
                callbacks: {
                    title: function(context) {
                      let pct = context[0].parsed.y.toFixed(2);
                      let count = context[0].label;

                      return `${pct}% of games had a position with ${count} legal moves`;
                    },
                    label: function(context) {
                        return null
                    },
                }
            },
        title: {
          display: true,
          text: 'max moves by game',
          font: {
            size: 16
          },
          padding: {
            top: 10,
            bottom: 30
          }
        },
        legend: {
          display: false
        }
      }
    }
  };

new Chart(document.getElementById('maxMovesHist'), config2);
</script>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://lukesalamone.github.io/tags/chess/">chess</a></span>
        <span class="tag"><a href="https://lukesalamone.github.io/tags/data/">data</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        460 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2024-06-13 19:38
        

        
          
        
      </p>
    </div>

    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>

        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://lukesalamone.github.io/posts/how-to-create-rust-python-bindings/">
                <span class="button__icon">‚Üê</span>
                <span class="button__text">How to Create Rust Python Bindings</span>
              </a>
            </span>
          

          
            <span class="button next">
              <a href="https://lukesalamone.github.io/posts/sparse-autoencoder/">
                <span class="button__text">What are Sparse Autoencoders?</span>
                <span class="button__icon">‚Üí</span>
              </a>
            </span>
          
        </div>
      </div>
    

  </main>
  <div id="shadow-search" class="posts">
    <div class="posts-group">
      <div class="post-year">2022</div>
      <ul class="posts-list"></ul>
    </div>
  </div>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2026 Luke Salamone</span>&nbsp;|&nbsp;
            <span><a href="https://lukesalamone.com/" target="_blank">lukesalamone.com</a>&nbsp;|&nbsp;<a href="https://github.com/lukesalamone/" target="_blank">github</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="../../bundle.min.a034cec899e27f579e64fa9d8570500df0d2a6f6fd98e853b96dddca5140309f943fbcbe760b87c9e2598969ed2bb51bc6470ed3db861ba77619d8e1ecff66ca.js" integrity="sha512-oDTOyJnif1eeZPqdhXBQDfDSpvb9mOhTuW3dylFAMJ&#43;UP7y&#43;dguHyeJZiWntK7UbxkcO09uGG6d2Gdjh7P9myg=="></script>



    </body>
</html>
